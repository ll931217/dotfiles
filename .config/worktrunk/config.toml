# Worktrunk hooks for tmux integration

# Create new tmux session when worktree is created
[post-create]
tmux = """tmux new-session -d -s "{{ worktree_name | replace(\".\", \"_\") }}" -c "{{ worktree }}" \\; \
  send-keys "cd {{ worktree }}" Enter \\; \
  send-keys "git status" Enter"""

# Attach to tmux session when switching worktrees (Doesn't work, worktrunk limitation)
[post-switch]
tmux = """if [ -n "$TMUX" ]; then \
  tmux switch-client -t "{{ worktree_name | replace(\".\", \"_\") }}"; \
else \
  tmux attach-session -t "{{ worktree_name | replace(\".\", \"_\") }}"; \
fi"""

# Kill tmux session when worktree is removed
[pre-remove]
tmux = "tmux kill-session -t '{{ worktree_name | replace(\".\", \"_\") }}' 2>/dev/null || true"

[projects]

[projects."github.com/ll931217/sunnyvale"]
approved-commands = ["pnpm install --frozen-lockfile", "pnpm run dev"]
