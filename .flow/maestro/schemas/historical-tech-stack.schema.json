{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://maestro.flow.dev/schemas/historical-tech-stack.schema.json",
  "title": "Historical Technology Stack Decisions",
  "description": "Historical record of technology stack decisions across all Maestro sessions for learning and pattern recognition",
  "type": "object",
  "required": ["decisions"],
  "properties": {
    "version": {
      "type": "string",
      "description": "Schema version",
      "default": "1.0"
    },
    "last_updated": {
      "type": "string",
      "description": "Last update timestamp",
      "format": "date-time"
    },
    "decisions": {
      "type": "array",
      "description": "Historical technology stack decisions",
      "items": {
        "type": "object",
        "required": [
          "decision_id",
          "session_id",
          "timestamp",
          "category",
          "choice",
          "rationale"
        ],
        "properties": {
          "decision_id": {
            "type": "string",
            "description": "Unique decision identifier"
          },
          "session_id": {
            "type": "string",
            "description": "Session that made this decision",
            "format": "uuid"
          },
          "timestamp": {
            "type": "string",
            "description": "When decision was made",
            "format": "date-time"
          },
          "category": {
            "type": "string",
            "description": "Technology category",
            "enum": [
              "language",
              "framework",
              "library",
              "database",
              "testing_framework",
              "build_tool",
              "deployment",
              "monitoring",
              "other"
            ]
          },
          "choice": {
            "type": "string",
            "description": "Technology that was chosen"
          },
          "version": {
            "type": "string",
            "description": "Version if applicable"
          },
          "rationale": {
            "type": "string",
            "description": "Why this technology was chosen"
          },
          "decision_factors": {
            "type": "object",
            "description": "Factors that influenced the decision",
            "properties": {
              "existing_dependency": {
                "type": "boolean",
                "description": "Was this already in the codebase?"
              },
              "codebase_patterns": {
                "type": "boolean",
                "description": "Were there existing patterns to follow?"
              },
              "ecosystem_maturity": {
                "type": "string",
                "description": "Ecosystem maturity assessment",
                "enum": ["mature", "stable", "emerging", "experimental"]
              },
              "community_size": {
                "type": "string",
                "description": "Community size assessment",
                "enum": ["large", "moderate", "small"]
              },
              "performance_requirements": {
                "type": "string",
                "description": "Performance considerations"
              },
              "scalability_requirements": {
                "type": "string",
                "description": "Scalability considerations"
              }
            }
          },
          "alternatives": {
            "type": "array",
            "description": "Alternative technologies considered",
            "items": {
              "type": "string"
            }
          },
          "outcome": {
            "type": "object",
            "description": "Outcome of using this technology",
            "properties": {
              "successful": {
                "type": "boolean",
                "description": "Was this choice successful?"
              },
              "issues": {
                "type": "array",
                "description": "Any issues encountered",
                "items": {
                  "type": "string"
                }
              },
              "would_choose_again": {
                "type": "boolean",
                "description": "Would choose this technology again?"
              }
            }
          },
          "context": {
            "type": "object",
            "description": "Additional context",
            "properties": {
              "feature_description": {
                "type": "string",
                "description": "Brief description of the feature"
              },
              "project_type": {
                "type": "string",
                "description": "Type of project"
              },
              "constraints": {
                "type": "array",
                "description": "Any constraints that affected the decision",
                "items": {
                  "type": "string"
                }
              }
            }
          }
        }
      }
    },
    "patterns": {
      "type": "object",
      "description": "Learned patterns from historical decisions",
      "properties": {
        "preferred_by_category": {
          "type": "object",
          "description": "Preferred technologies by category",
          "additionalProperties": {
            "type": "object",
            "properties": {
              "technology": {
                "type": "string",
                "description": "Most preferred technology"
              },
              "success_rate": {
                "type": "number",
                "description": "Success rate (0-1)",
                "minimum": 0,
                "maximum": 1
              },
              "usage_count": {
                "type": "integer",
                "description": "Number of times used",
                "minimum": 0
              }
            }
          }
        },
        "avoid_list": {
          "type": "array",
          "description": "Technologies to avoid based on historical outcomes",
          "items": {
            "type": "object",
            "properties": {
              "technology": {
                "type": "string"
              },
              "reason": {
                "type": "string"
              },
              "failure_count": {
                "type": "integer",
                "minimum": 0
              }
            }
          }
        }
      }
    }
  }
}
