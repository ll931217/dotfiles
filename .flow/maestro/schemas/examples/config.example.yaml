# Maestro Orchestrator Configuration
version: "1.0"

execution:
  # Maximum refinement iterations before completion
  max_iterations: 3

  # Session timeout in minutes
  timeout_minutes: 120

  # Automatically create checkpoints at safe points
  auto_checkpoint: true

  # When to create checkpoints
  checkpoint_interval: task_group_complete  # phase_complete | task_group_complete | every_task | manual

  # Enable parallel task execution
  parallel_execution: true

  # Maximum parallel tasks
  max_parallel_tasks: 5

  # Enable automatic error recovery
  error_recovery_enabled: true

  # Pause and ask for help on unrecoverable errors
  pause_on_error: true

  # Behavior after pause
  continuation_mode: resume_manual  # resume_automatic | resume_manual | terminate

decision_engine:
  tech_stack_selection:
    sources:
      - existing_dependencies
      - codebase_patterns
      - ecosystem_maturity
    strategy: prefer_existing  # prefer_existing | mature_new | experimental | balanced
    require_confidence: high  # high | medium | low

  architecture_patterns:
    sources:
      - codebase_analysis
      - complexity_assessment
      - scalability_requirements
    strategy: match_existing  # match_existing | appropriate_new | minimal | balanced
    principle_adherence: 0.8  # 0-1 importance of SOLID principles

  task_ordering:
    sources:
      - dependency_analysis
      - risk_assessment
      - parallelization_opportunity
    strategy: foundational_first  # foundational_first | risk_early | parallel_maximization | hybrid
    max_group_size: 5

validation:
  # Run test suite
  test_suite: true

  # Minimum test coverage percentage
  test_coverage_threshold: 80

  # Validate PRD requirements
  prd_validation: true

  # Run linting
  linting: true

  # Run type checking
  type_checking: true

  # Run security audit
  security_scan: true

  # Fail validation on any error
  fail_on_error: false

logging:
  # Log level
  level: normal  # minimal | normal | verbose | debug

  # Include decision rationale in logs
  include_rationale: true

  # Log file path (relative to session directory)
  log_file: execution-log.md

  # Output logs in real-time
  realtime_output: true

persistence:
  # Directory for state files
  state_directory: .flow/maestro

  # Automatically save state
  auto_save: true

  # When to save state
  save_interval: every_decision  # every_decision | every_task | phase_complete

  # Compress sessions older than 30 days
  compress_old_sessions: false

  # Days to keep session data
  retention_days: 90

subagents:
  # Enable subagent delegation
  enabled: true

  # Automatically select subagent based on task
  auto_select: true

  # Task category to subagent mapping
  mapping:
    frontend:
      subagent: frontend-developer
      skills: [frontend-design]
      triggers: [ui, component, frontend, react, vue]
    backend:
      subagent: backend-architect
      skills: []
      triggers: [api, endpoint, service, controller]
    database:
      subagent: database-admin
      skills: []
      triggers: [schema, migration, query, database]
    testing:
      subagent: test-automator
      skills: [webapp-testing]
      triggers: [test, spec, coverage, tdd]
    documentation:
      subagent: api-documenter
      skills: [document-skills]
      triggers: [docs, api-spec, readme]

reporting:
  # Generate final report
  generate_report: true

  # Include code diffs in report
  include_diffs: false

  # Include test results in report
  include_test_results: true

  # Report format
  format: markdown  # markdown | json | both
